import { EVENT } from '@/constants/mixpanel';
import { mp } from '@/components/Mixpanel';
import useAppDownloadLink from '@/shared/hooks/useAppDownloadLink';

const AppDownloadCTA = () => {
  const { type, link } = useAppDownloadLink();

  const handleAppDownloadClick = () => {
    if (!type) return;
    mp?.track(EVENT.APP_DOWNLOAD_LINK_CLICK.NAME, {
      type:
        type === 'android'
          ? EVENT.APP_DOWNLOAD_LINK_CLICK.TYPE.ANDROID
          : EVENT.APP_DOWNLOAD_LINK_CLICK.TYPE.IOS,
      page: EVENT.PAGE.HOME,
    });
  };
  return (
    <>
      {type && link && (
        <div className="pb-[36px] pt-[24px]">
          <div className="flex h-[84px] w-full items-center rounded-[8px] bg-gradient-to-b from-secondary-50 to-secondary-100 px-[16px] py-[14px]">
            <JirumIcon />
            <div className="ml-[14px]">
              <p>
                <span className="text-lg font-bold text-gray-800">지름알림 앱에서</span>
                <br />
                <span className="text-base font-semibold text-secondary-700">
                  핫딜 알림 받아보세요!
                </span>
              </p>
            </div>
            <div className="ml-auto">
              <a
                href={link}
                onClick={handleAppDownloadClick}
                className="block h-[32px] w-[88px] rounded-[20px] bg-gray-800 px-[12px] py-[6px] text-sm font-semibold text-white"
              >
                앱 다운받기
              </a>
            </div>
          </div>
        </div>
      )}
    </>
  );
};

export default AppDownloadCTA;

const JirumIcon = () => {
  return (
    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clipPath="url(#clip0_61_25264)">
        <rect width="40" height="40" rx="8" fill="white" />
        <path
          d="M35.3272 11.5359C35.3272 14.9773 32.6413 17.8031 29.2466 18.0083C29.116 18.027 28.9761 18.027 28.8362 18.027C28.6031 18.027 28.3699 18.0176 28.1461 17.9897C26.9617 16.1617 25.0218 15.1825 23.1286 14.2219C23.0447 14.1753 22.9514 14.1286 22.8675 14.0913C22.6996 13.6903 22.5597 13.2706 22.4758 12.8323C22.3918 12.4126 22.3452 11.9836 22.3452 11.5359C22.3452 7.94536 25.255 5.04492 28.8362 5.04492C32.4175 5.04492 35.3272 7.94536 35.3272 11.5359Z"
          fill="black"
        />
        <path
          d="M34.0221 37.0428C33.8169 37.6024 33.5558 38.1433 33.248 38.6656C32.9682 39.1412 32.6605 39.5889 32.3247 39.9992H8.19799C7.90888 39.7474 7.63843 39.4769 7.38662 39.1878C5.66128 37.1827 4.5608 34.4408 4.63541 31.0367C5.99702 21.5613 7.61977 19.864 7.61977 19.864C7.61977 19.864 11.229 28.099 12.917 22.6805C13.318 21.3935 13.5419 20.1904 13.6911 19.0433C13.9895 16.7024 14.0175 14.5854 14.7449 12.3471C15.1553 11.0694 15.8081 9.76372 16.8713 8.35547C16.8713 8.35547 17.7666 14.5201 20.3686 16.2827C22.9613 18.0547 27.4751 18.9873 28.4917 23.5945C29.5082 28.2109 30.7486 24.5271 30.7486 24.5271C30.7486 24.5271 31.3082 26.1592 33.2294 28.5373C34.078 29.6005 34.7775 33.2844 34.0221 37.0428Z"
          fill="#9EF22E"
        />
        <path
          d="M13.6909 19.0439C14.2785 17.0201 14.465 15.2108 14.6329 13.4761C14.6702 13.0938 14.7075 12.7207 14.7448 12.3477C14.0173 14.5859 13.9894 16.703 13.6909 19.0439Z"
          fill="black"
        />
        <path
          d="M34.9826 25.199C34.7588 24.798 34.535 24.3969 34.3205 24.0052C33.3505 22.2519 32.735 21.1608 32.2128 20.8064L31.7091 20.4613L31.5133 21.0395C31.3268 21.5804 30.9817 22.1493 30.8418 22.196C30.8418 22.196 30.4501 22.0281 30.0304 20.1069C29.8532 19.3142 29.5921 18.6147 29.247 18.0085C27.96 15.6303 25.6472 14.4552 23.5488 13.3921C23.1757 13.2055 22.8213 13.019 22.4763 12.8325C22.0379 12.5993 21.6369 12.3662 21.2639 12.1144C18.7272 10.3797 17.7759 4.12183 17.7759 4.05654L17.608 2.95605L16.9365 3.84204C14.3066 7.32071 14.0174 10.2678 13.7097 13.3827C13.5325 15.1827 13.346 17.0386 12.6931 19.109C12.376 20.1256 11.975 20.7038 11.5647 20.7224C10.5295 20.8064 8.83211 18.0458 7.97411 16.078L7.64769 15.3506L7.17206 15.9941C7.1161 16.0687 5.66122 18.1018 4.225 28.1554C3.74004 31.5781 3.94521 34.4319 4.85918 36.7541C5.2975 37.8919 5.91303 38.8992 6.6871 39.7945C6.74306 39.8598 6.80834 39.9344 6.88295 39.9997H8.19794C7.90883 39.7478 7.63837 39.4774 7.38656 39.1883C5.66122 37.1831 4.84052 34.5345 4.91513 31.1305C4.93379 30.2351 5.00839 29.2932 5.14829 28.286C6.09023 21.6924 7.03217 18.6334 7.54511 17.3557C8.31918 18.9132 9.91395 21.6551 11.5367 21.6551H11.6113C12.4693 21.6084 13.1315 20.8437 13.5884 19.3888C13.6258 19.2769 13.6631 19.1556 13.691 19.0437C13.9895 16.7028 14.0174 14.5858 14.7449 12.3475C15.0153 9.97867 15.4164 7.78702 17.0484 5.30625C17.4588 7.29273 18.55 11.3869 20.7323 12.8791C21.3664 13.3174 22.0939 13.6998 22.868 14.0915C22.9519 14.1288 23.0452 14.1755 23.1291 14.2221C25.0223 15.1827 26.9621 16.1619 28.1466 17.9899C28.5849 18.6427 28.9113 19.4074 29.1165 20.3121C29.5362 22.2239 30.0491 23.0913 30.7765 23.1286C31.3734 23.1752 31.8211 22.5783 32.0915 22.0467C32.4925 22.625 33.0148 23.5762 33.4998 24.4529C33.7143 24.8539 33.9381 25.255 34.1712 25.656C35.0199 27.1575 35.7847 32.5667 34.022 37.0433C33.8169 37.6028 33.5557 38.1437 33.248 38.666C32.9682 39.1416 32.6604 39.5893 32.3247 39.9997H33.4998C33.7049 39.7292 33.8821 39.4401 34.0593 39.1416C37.0064 34.0775 36.0365 27.0736 34.9826 25.199Z"
          fill="black"
        />
        <path
          d="M17.9155 25.8613C18.3791 25.8613 18.7549 25.4855 18.7549 25.022C18.7549 24.5584 18.3791 24.1826 17.9155 24.1826C17.452 24.1826 17.0762 24.5584 17.0762 25.022C17.0762 25.4855 17.452 25.8613 17.9155 25.8613Z"
          fill="black"
        />
        <path
          d="M21.627 25.8613C22.0905 25.8613 22.4663 25.4855 22.4663 25.022C22.4663 24.5584 22.0905 24.1826 21.627 24.1826C21.1634 24.1826 20.7876 24.5584 20.7876 25.022C20.7876 25.4855 21.1634 25.8613 21.627 25.8613Z"
          fill="black"
        />
        <path
          d="M28.8552 7.8518L26.2345 11.8061C26.1786 11.89 26.2345 12.002 26.3371 12.002H28.678C28.7526 12.002 28.8086 12.0672 28.7992 12.1418L28.4821 14.7812C28.4635 14.9117 28.6407 14.9677 28.706 14.8651L31.4385 10.603C31.4945 10.5191 31.4385 10.4165 31.3359 10.4165H28.9484C28.8738 10.4165 28.8179 10.3512 28.8272 10.2766L29.0697 7.95439C29.079 7.82382 28.9205 7.76787 28.8459 7.87045L28.8552 7.8518Z"
          fill="white"
        />
        <path
          d="M18.8481 30.1698C17.1321 30.1698 16.0876 28.9014 15.7425 28.0901C15.5933 27.7357 15.7518 27.3253 16.1062 27.1761C16.4606 27.0269 16.871 27.1854 17.0202 27.5398C17.0948 27.717 17.8222 29.2092 19.6222 28.6496C19.9952 28.5284 20.3869 28.7429 20.4988 29.1066C20.6107 29.4797 20.4056 29.8714 20.0418 29.9833C19.6128 30.1138 19.2118 30.1791 18.8388 30.1791L18.8481 30.1698Z"
          fill="black"
        />
      </g>
      <defs>
        <clipPath id="clip0_61_25264">
          <rect width="40" height="40" rx="8" fill="white" />
        </clipPath>
      </defs>
    </svg>
  );
};
