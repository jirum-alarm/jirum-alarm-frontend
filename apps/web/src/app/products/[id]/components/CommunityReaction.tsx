'use client';

import { Info } from '@/components/common/icons';
import Tooltip from '@/components/common/Tooltip';
import { EVENT } from '@/constants/mixpanel';
import { cn } from '@/lib/cn';
import { mp } from '@/lib/mixpanel';
import { ProductQuery } from '@/shared/api/gql/graphql';

export default function CommunityReaction({
  product,
}: {
  product: NonNullable<ProductQuery['product']>;
}) {
  const nanSafe = (num: number) => (isNaN(num) ? 0 : num);
  const positiveCount = product?.positiveCommunityReactionCount || 0;
  const negativeCount = product?.negativeCommunityReactionCount || 0;

  const allCount = positiveCount + negativeCount;

  const positivePercent = nanSafe((positiveCount / allCount) * 100).toFixed(0);
  const negativePercent = nanSafe((negativeCount / allCount) * 100).toFixed(0);

  const isPositiveMax = +positivePercent === 100;

  const handleCommunityLinkClick = () => {
    mp.track(EVENT.COMMUNITY_LINK_CLICK.NAME, {
      page: EVENT.PAGE.DETAIL,
    });
  };

  return (
    <>
      {/* @TODO: remove after add hotdeal index section */}
      <section className="px-5">
        <div className="flex items-center justify-between pb-4">
          <div className="flex items-center gap-2">
            <h2 className="font-semibold text-gray-900">커뮤니티 반응</h2>
            <Tooltip
              content={
                <p className="text-s text-white">
                  <strong className="font-semibold">실제 커뮤니티</strong> 사용자들의
                  <br /> 핫딜 리뷰를 요약해 확인해요
                </p>
              }
            >
              <button>
                <Info />
              </button>
            </Tooltip>
          </div>
          <div>
            <a
              href={product.url}
              target="_blank"
              rel="noopener noreferrer"
              onClick={handleCommunityLinkClick}
              className="flex items-center justify-end gap-1"
            >
              <p className="text-sm font-semibold text-gray-500">
                ‘{product.provider.nameKr ?? '커뮤니티'}’ 반응 보러가기
              </p>
              <svg
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M7.14307 15.7147L12.8574 10.0004L7.14307 4.28613"
                  stroke="#667085"
                  stroke-width="1.5"
                  stroke-linecap="square"
                  stroke-linejoin="round"
                />
              </svg>
            </a>
          </div>
        </div>
        {allCount !== 0 ? (
          <Reaction
            positivePercent={positivePercent}
            negativePercent={negativePercent}
            isPositiveMax={isPositiveMax}
          />
        ) : (
          <NoReaction />
        )}
      </section>
    </>
  );
}

const Reaction = ({
  positivePercent,
  negativePercent,
  isPositiveMax,
}: {
  positivePercent: string;
  negativePercent: string;
  isPositiveMax: boolean;
}) => {
  return (
    <>
      <div className="h-[118px] rounded-[8px] border border-gray-200 px-4 pb-8 pt-6">
        <div className="flex justify-between pb-[10px]">
          <div className="inline-flex items-center gap-x-1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
            >
              <rect width="20" height="20" fill="white" />
              <path
                d="M15.8506 14.6287C15.7284 15.1254 15.5431 15.6221 15.279 16.0952C14.3999 17.6761 12.8978 18.5158 10.8202 18.5947C7.68605 18.7129 5.60843 18.1531 4.45727 16.8797C3.51899 15.835 3.20755 14.3093 3.50322 12.212C3.52688 12.0385 3.55447 11.869 3.57813 11.7074C3.58207 11.6719 3.58995 11.6364 3.5939 11.6009C4.08669 9.13697 4.55977 8.64024 4.55977 8.64024C4.55977 8.64024 6.08546 12.1213 6.79902 9.83083C6.96854 9.28678 7.06316 8.77822 7.12624 8.29331C7.13018 8.27754 7.13018 8.25783 7.13412 8.23812C7.36672 7.41023 7.44162 6.66907 7.51258 5.94762C7.52835 5.79781 7.54412 5.65194 7.55989 5.50608V5.49425C7.55989 5.49425 7.56778 5.47454 7.57172 5.46271C7.74518 4.92261 8.02115 4.37068 8.47057 3.77539C8.47057 3.77539 8.84904 6.38128 9.94895 7.12638C11.0449 7.87543 12.953 8.26966 13.3827 10.2172C13.8124 12.1686 14.3368 10.6114 14.3368 10.6114C14.3368 10.6114 14.5733 11.3013 15.3854 12.3066C15.6456 12.6338 15.8743 13.5445 15.8506 14.6287Z"
                fill="#9EF22E"
              />
              <path
                d="M10.4691 11.1745C10.665 11.1745 10.8239 11.0156 10.8239 10.8197C10.8239 10.6237 10.665 10.4648 10.4691 10.4648C10.2731 10.4648 10.1143 10.6237 10.1143 10.8197C10.1143 11.0156 10.2731 11.1745 10.4691 11.1745Z"
                fill="black"
              />
              <path
                d="M8.90022 11.1745C9.09618 11.1745 9.25503 11.0156 9.25503 10.8197C9.25503 10.6237 9.09618 10.4648 8.90022 10.4648C8.70426 10.4648 8.54541 10.6237 8.54541 10.8197C8.54541 11.0156 8.70426 11.1745 8.90022 11.1745Z"
                fill="black"
              />
              <path
                d="M9.29447 12.9962C8.56908 12.9962 8.12753 12.46 7.98167 12.117C7.91859 11.9672 7.98561 11.7938 8.13542 11.7307C8.28523 11.6676 8.45869 11.7346 8.52177 11.8844C8.55331 11.9593 8.86081 12.5901 9.62168 12.3536C9.77938 12.3023 9.94495 12.393 9.99226 12.5468C10.0396 12.7044 9.95284 12.87 9.79909 12.9173C9.61774 12.9725 9.44822 13.0001 9.29053 13.0001L9.29447 12.9962Z"
                fill="black"
              />
              <mask
                id="path-5-outside-1_1192_12483"
                maskUnits="userSpaceOnUse"
                x="2"
                y="0.5"
                width="15"
                height="19"
                fill="black"
              >
                <rect fill="white" x="2" y="0.5" width="15" height="19" />
                <path d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z" />
              </mask>
              <path
                d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z"
                fill="black"
              />
              <path
                d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z"
                stroke="black"
                strokeWidth="0.2"
                mask="url(#path-5-outside-1_1192_12483)"
              />
            </svg>
            <span className="font-semibold text-gray-900">구매하고 싶어요!</span>
          </div>

          <div className="inline-flex items-center gap-x-1">
            <span className="text-gray-600">조금 아쉬워요</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
            >
              <rect width="20" height="20" fill="white" />
              <path
                d="M15.8506 14.6287C15.7284 15.1254 15.5431 15.6221 15.279 16.0952C14.3999 17.6761 12.8978 18.5158 10.8202 18.5947C7.68605 18.7129 5.60843 18.1531 4.45727 16.8797C3.51899 15.835 3.20755 14.3093 3.50322 12.212C3.52688 12.0385 3.55447 11.869 3.57813 11.7074C3.58207 11.6719 3.58995 11.6364 3.5939 11.6009C4.08669 9.13697 4.55977 8.64024 4.55977 8.64024C4.55977 8.64024 6.08546 12.1213 6.79902 9.83083C6.96854 9.28678 7.06316 8.77822 7.12624 8.29331C7.13018 8.27754 7.13018 8.25783 7.13412 8.23812C7.36672 7.41023 7.44162 6.66907 7.51258 5.94762C7.52835 5.79781 7.54412 5.65194 7.55989 5.50608V5.49425C7.55989 5.49425 7.56778 5.47454 7.57172 5.46271C7.74518 4.92261 8.02115 4.37068 8.47057 3.77539C8.47057 3.77539 8.84904 6.38128 9.94895 7.12638C11.0449 7.87543 12.953 8.26966 13.3827 10.2172C13.8124 12.1686 14.3368 10.6114 14.3368 10.6114C14.3368 10.6114 14.5733 11.3013 15.3854 12.3066C15.6456 12.6338 15.8743 13.5445 15.8506 14.6287Z"
                fill="#D0D5DD"
              />
              <path
                d="M10.4691 11.1745C10.665 11.1745 10.8239 11.0156 10.8239 10.8197C10.8239 10.6237 10.665 10.4648 10.4691 10.4648C10.2731 10.4648 10.1143 10.6237 10.1143 10.8197C10.1143 11.0156 10.2731 11.1745 10.4691 11.1745Z"
                fill="#667085"
              />
              <path
                d="M8.90022 11.1745C9.09618 11.1745 9.25503 11.0156 9.25503 10.8197C9.25503 10.6237 9.09618 10.4648 8.90022 10.4648C8.70426 10.4648 8.54541 10.6237 8.54541 10.8197C8.54541 11.0156 8.70426 11.1745 8.90022 11.1745Z"
                fill="#667085"
              />
              <path
                d="M9.56893 11.81C10.1473 11.3722 10.823 11.5332 11.1463 11.7186C11.287 11.8 11.3382 11.9788 11.2569 12.1195C11.1755 12.2602 10.9967 12.3114 10.856 12.2301C10.7857 12.1894 10.1598 11.8721 9.69589 12.5199C9.60109 12.6559 9.41435 12.6836 9.28383 12.5895C9.15093 12.4924 9.12015 12.308 9.21418 12.1775C9.32546 12.024 9.44397 11.8997 9.5697 11.8045L9.56893 11.81Z"
                fill="#667085"
              />
              <mask
                id="path-5-outside-1_1192_12494"
                maskUnits="userSpaceOnUse"
                x="2"
                y="0.5"
                width="15"
                height="19"
                fill="black"
              >
                <rect fill="white" x="2" y="0.5" width="15" height="19" />
                <path d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z" />
              </mask>
              <path
                d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z"
                fill="#667085"
              />
              <path
                d="M16.1148 10.9025C16.0202 10.7369 15.9256 10.5674 15.8349 10.4018C15.4249 9.6567 15.1647 9.19545 14.944 9.04564L14.7311 8.89977L14.6483 9.14814C14.5734 9.37286 14.4275 9.61728 14.3644 9.63699C14.3644 9.63305 14.1989 9.56603 14.0215 8.75391C13.6627 7.11784 12.3972 6.47523 11.2815 5.91148C10.9307 5.73013 10.5956 5.56061 10.3156 5.37138C9.24333 4.6381 8.84515 1.99279 8.84121 1.9652L8.77025 1.5L8.4864 1.87846C7.3786 3.34502 7.25245 4.5908 7.12235 5.90754C7.04745 6.66841 6.9686 7.45294 6.69658 8.32814C6.5586 8.75785 6.38908 9.00227 6.21561 9.0141H6.19984C5.7583 9.0141 5.05656 7.87082 4.69781 7.05082L4.56377 6.73937L4.35877 7.01139C4.33512 7.04687 3.72011 7.9063 3.11299 12.1561C2.7976 14.3757 3.14059 16.0078 4.1656 17.1432C5.03291 18.1051 6.37331 18.6886 8.23015 18.9054C8.54948 18.9449 8.88064 18.9725 9.2315 18.9843C9.45622 18.9961 9.68487 19.004 9.92141 19.004H10.0279C10.2881 19.004 10.5561 19.0001 10.8321 18.9882C10.8676 18.9882 10.9031 18.9843 10.9346 18.9803C13.0792 18.8739 14.6995 17.9435 15.626 16.2877C16.7614 14.2495 16.5445 11.6634 16.1148 10.9025ZM15.8507 14.628C15.7285 15.1247 15.5432 15.6215 15.2791 16.0945C14.8375 16.887 14.2422 17.4901 13.4971 17.908C13.4064 17.9593 13.3118 18.0105 13.2133 18.0539C12.9334 18.1879 12.6298 18.2983 12.3105 18.3811C12.2001 18.4126 12.0858 18.4363 11.9714 18.46C11.861 18.4836 11.7428 18.5033 11.6284 18.5191C11.5062 18.5388 11.384 18.5546 11.2579 18.5625C11.1357 18.5743 11.0095 18.5822 10.8833 18.59C10.8636 18.594 10.84 18.594 10.8203 18.594C10.5088 18.6058 10.2092 18.6098 9.92141 18.6098C9.68487 18.6098 9.45228 18.6019 9.2315 18.59C9.04227 18.5822 8.85698 18.5703 8.67958 18.5546C8.54159 18.5427 8.40756 18.5309 8.27746 18.5151C8.16707 18.5033 8.06063 18.4875 7.95419 18.4718C7.85957 18.46 7.76495 18.4442 7.67428 18.4284C7.45745 18.389 7.24851 18.3456 7.05139 18.2983C6.96072 18.2747 6.87004 18.251 6.77937 18.2234C6.72023 18.2076 6.66504 18.1919 6.60985 18.1761C6.49946 18.1406 6.39302 18.1051 6.29052 18.0657C6.10128 17.9948 5.92388 17.9199 5.7583 17.841C5.69917 17.8095 5.64003 17.7819 5.58484 17.7503C5.26945 17.5808 4.98954 17.3837 4.74512 17.1629C4.69781 17.1235 4.65445 17.0841 4.61502 17.0407C4.55983 16.9895 4.50858 16.9343 4.45733 16.8791C3.51905 15.8344 3.20761 14.3087 3.50328 12.2113C3.52694 12.0379 3.55453 11.8684 3.57819 11.7067C3.58213 11.6712 3.59001 11.6358 3.59396 11.6003C3.96059 9.22699 4.3154 8.08765 4.51646 7.58697C4.84368 8.24535 5.51782 9.40834 6.20379 9.40834C6.21561 9.40834 6.22744 9.40834 6.23927 9.40834C6.59802 9.38862 6.87793 9.06535 7.0711 8.45035C7.09476 8.37938 7.11447 8.30842 7.13418 8.2414C7.36678 7.41351 7.44168 6.67235 7.51264 5.9509C7.52841 5.80109 7.54418 5.65523 7.55995 5.50936V5.49753C7.67428 4.48435 7.83986 3.55396 8.53371 2.49741C8.71112 3.33713 9.16843 5.06782 10.0949 5.70254C10.3945 5.90359 10.7375 6.081 11.1041 6.26629C12.1922 6.81822 13.3158 7.38986 13.6351 8.84064C13.8125 9.64882 14.0293 10.0155 14.3408 10.0312C14.6049 10.0549 14.7784 9.79863 14.8967 9.57786C15.0622 9.81834 15.2869 10.2244 15.488 10.595C15.5826 10.7606 15.6772 10.9301 15.7718 11.0996C16.032 11.5648 16.241 13.0787 15.8507 14.6319V14.628Z"
                stroke="#667085"
                strokeWidth="0.2"
                mask="url(#path-5-outside-1_1192_12494)"
              />
            </svg>
          </div>
        </div>
        <div className="relative h-7 w-full rounded-full bg-gray-200">
          <div
            className={cn('absolute h-full rounded-l-full bg-gray-900', {
              'rounded-full': isPositiveMax,
            })}
            style={{ width: `${positivePercent}%`, transition: 'width 2s ease-in-out' }}
          ></div>
          <div className="relative flex h-full items-center justify-between px-2">
            <span className="text-sm font-semibold text-primary-600">{positivePercent}%</span>
            <span className="right-2 text-sm text-gray-700">{negativePercent}%</span>
          </div>
        </div>
      </div>
    </>
  );
};

const NoReaction = () => {
  return (
    <div className="flex h-[118px] items-center justify-center gap-[4px] rounded-[8px] border border-gray-200 px-[28px] py-[24px]">
      <div className="flex aspect-square w-[60px] items-center justify-center">
        <svg
          width="33"
          height="51"
          viewBox="0 0 33 51"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M26.0652 50.1309C26.1215 50.5434 25.7934 50.909 25.3809 50.909H17.2059C16.8309 50.909 16.5215 50.609 16.5215 50.2246V42.3121H16.7746C17.3934 42.3121 18.0309 42.3027 18.6871 42.2746C18.7715 42.2746 18.8559 42.2652 18.9309 42.2559L19.5121 46.9902C19.5402 47.2059 19.7277 47.3746 19.9527 47.3746H23.2902C23.2902 47.3746 25.6809 47.3746 26.0652 50.1309Z"
            fill="#98A2B3"
          />
          <path
            d="M14.8816 42.2656V50.225C14.8816 50.6094 14.5723 50.9094 14.1973 50.9094H6.02227C5.60977 50.9094 5.29102 50.5438 5.34727 50.1313C5.72227 47.375 8.12227 47.375 8.12227 47.375H11.4504C11.6754 47.375 11.8629 47.2062 11.891 46.9906L12.5004 42.0781C13.2598 42.1719 14.0473 42.2375 14.8816 42.2656Z"
            fill="#98A2B3"
          />
          <path
            d="M30.6216 31.9051C30.331 33.0863 29.8903 34.2676 29.2622 35.3926C27.1716 39.152 23.5997 41.1488 18.6591 41.3363C11.206 41.6176 6.26533 40.2863 3.52783 37.2582C1.29658 34.7738 0.555955 31.1457 1.25908 26.1582C1.31533 25.7457 1.38096 25.3426 1.43721 24.9582C1.44658 24.8738 1.46533 24.7895 1.47471 24.7051C2.64658 18.8457 3.77158 17.6645 3.77158 17.6645C3.77158 17.6645 7.39971 25.9426 9.09658 20.4957C9.49971 19.202 9.72471 17.9926 9.87471 16.8395C9.88408 16.802 9.88408 16.7551 9.89346 16.7082C10.4466 14.7395 10.6247 12.977 10.7935 11.2613C10.831 10.9051 10.8685 10.5582 10.906 10.2113V10.1832C10.906 10.1832 10.9247 10.1363 10.9341 10.1082C11.3466 8.82383 12.0028 7.51133 13.0716 6.0957C13.0716 6.0957 13.9716 12.2926 16.5872 14.0645C19.1935 15.8457 23.731 16.7832 24.7528 21.4145C25.7747 26.0551 27.0216 22.352 27.0216 22.352C27.0216 22.352 27.5841 23.9926 29.5153 26.3832C30.1341 27.1613 30.6778 29.327 30.6216 31.9051Z"
            fill="#E4E7EC"
          />
          <path
            d="M17.8252 23.6934C18.2912 23.6934 18.6689 23.3156 18.6689 22.8496C18.6689 22.3836 18.2912 22.0059 17.8252 22.0059C17.3592 22.0059 16.9814 22.3836 16.9814 22.8496C16.9814 23.3156 17.3592 23.6934 17.8252 23.6934Z"
            fill="#98A2B3"
          />
          <path
            d="M14.0938 23.6934C14.5597 23.6934 14.9375 23.3156 14.9375 22.8496C14.9375 22.3836 14.5597 22.0059 14.0938 22.0059C13.6278 22.0059 13.25 22.3836 13.25 22.8496C13.25 23.3156 13.6278 23.6934 14.0938 23.6934Z"
            fill="#98A2B3"
          />
          <path
            d="M15.0312 28.0266C13.3062 28.0266 12.2562 26.7516 11.9093 25.936C11.7593 25.5797 11.9187 25.1672 12.2749 25.0172C12.6312 24.8672 13.0437 25.0266 13.1937 25.3828C13.2687 25.561 13.9999 27.061 15.8093 26.4985C16.1843 26.3766 16.578 26.5922 16.6905 26.9578C16.803 27.3328 16.5968 27.7266 16.2312 27.8391C15.7999 27.9703 15.3968 28.036 15.0218 28.036L15.0312 28.0266Z"
            fill="#98A2B3"
          />
          <path
            d="M31.2499 23.0469C31.0249 22.6531 30.7999 22.25 30.5843 21.8562C29.6093 20.0844 28.9906 18.9875 28.4656 18.6312L27.9593 18.2844L27.7624 18.875C27.5843 19.4094 27.2374 19.9906 27.0874 20.0375C27.0874 20.0281 26.6937 19.8687 26.2718 17.9375C25.4187 14.0469 22.4093 12.5187 19.7562 11.1781C18.9218 10.7469 18.1249 10.3437 17.4593 9.89375C14.9093 8.15 13.9624 1.85937 13.9531 1.79375L13.7843 0.6875L13.1093 1.5875C10.4749 5.075 10.1749 8.0375 9.86557 11.1687C9.68744 12.9781 9.49994 14.8437 8.85307 16.925C8.52494 17.9469 8.12182 18.5281 7.70932 18.5562H7.67182C6.62182 18.5562 4.95307 15.8375 4.09994 13.8875L3.78119 13.1469L3.29369 13.7937C3.23744 13.8781 1.77494 15.9219 0.331193 26.0281C-0.418807 31.3062 0.396818 35.1875 2.83432 37.8875C4.89682 40.175 8.08432 41.5625 12.4999 42.0781C13.2593 42.1719 14.0468 42.2375 14.8812 42.2656C15.4156 42.2937 15.9593 42.3125 16.5218 42.3125H16.7749C17.3937 42.3125 18.0312 42.3031 18.6874 42.275C18.7718 42.275 18.8562 42.2656 18.9312 42.2562C24.0312 42.0031 27.8843 39.7906 30.0874 35.8531C32.7874 31.0062 32.2718 24.8562 31.2499 23.0469ZM30.6218 31.9062C30.3312 33.0875 29.8906 34.2687 29.2624 35.3937C28.2124 37.2781 26.7968 38.7125 25.0249 39.7062C24.8093 39.8281 24.5843 39.95 24.3499 40.0531C23.6843 40.3719 22.9624 40.6344 22.2031 40.8312C21.9406 40.9062 21.6687 40.9625 21.3968 41.0187C21.1343 41.075 20.8531 41.1219 20.5812 41.1594C20.2906 41.2062 19.9999 41.2437 19.6999 41.2625C19.4093 41.2906 19.1093 41.3094 18.8093 41.3281C18.7624 41.3375 18.7062 41.3375 18.6593 41.3375C17.9187 41.3656 17.2062 41.375 16.5218 41.375C15.9593 41.375 15.4062 41.3562 14.8812 41.3281C14.4312 41.3094 13.9906 41.2812 13.5687 41.2437C13.2406 41.2156 12.9218 41.1875 12.6124 41.15C12.3499 41.1219 12.0968 41.0844 11.8437 41.0469C11.6187 41.0187 11.3937 40.9812 11.1781 40.9437C10.6624 40.85 10.1656 40.7469 9.69682 40.6344C9.48119 40.5781 9.26557 40.5219 9.04994 40.4562C8.90932 40.4187 8.77807 40.3812 8.64682 40.3437C8.38432 40.2594 8.13119 40.175 7.88744 40.0812C7.43744 39.9125 7.01557 39.7344 6.62182 39.5469C6.48119 39.4719 6.34057 39.4062 6.20932 39.3312C5.45932 38.9281 4.79369 38.4594 4.21244 37.9344C4.09994 37.8406 3.99682 37.7469 3.90307 37.6437C3.77182 37.5219 3.64994 37.3906 3.52807 37.2594C1.29682 34.775 0.556193 31.1469 1.25932 26.1594C1.31557 25.7469 1.38119 25.3437 1.43744 24.9594C1.44682 24.875 1.46557 24.7906 1.47494 24.7062C2.34682 19.0625 3.19057 16.3531 3.66869 15.1625C4.44682 16.7281 6.04994 19.4937 7.68119 19.4937C7.70932 19.4937 7.73744 19.4937 7.76557 19.4937C8.61869 19.4469 9.28432 18.6781 9.74369 17.2156C9.79994 17.0469 9.84682 16.8781 9.89369 16.7188C10.4468 14.75 10.6249 12.9875 10.7937 11.2719C10.8312 10.9156 10.8687 10.5687 10.9062 10.2219V10.1937C11.1781 7.78437 11.5718 5.57187 13.2218 3.05937C13.6437 5.05625 14.7312 9.17187 16.9343 10.6812C17.6468 11.1594 18.4624 11.5812 19.3343 12.0219C21.9218 13.3344 24.5937 14.6937 25.3531 18.1437C25.7749 20.0656 26.2906 20.9375 27.0312 20.975C27.6593 21.0312 28.0718 20.4219 28.3531 19.8969C28.7468 20.4687 29.2812 21.4344 29.7593 22.3156C29.9843 22.7094 30.2093 23.1125 30.4343 23.5156C31.0531 24.6219 31.5499 28.2219 30.6218 31.9156V31.9062Z"
            fill="#98A2B3"
          />
        </svg>
      </div>
      <p>
        <span className="font-semibold text-gray-700">커뮤니티 반응을 모으고 있어요!</span>
        <br />
        <span className="text-sm text-gray-500">잠시후 다시 확인해 주세요</span>
      </p>
    </div>
  );
};
